# Roadmap

## Игра про музыку

## MVP

-   Начинать мелодию с той звезды, на которую нажали, проматывать
-   Сделать три звезды, но чуть большего размера
-   Цвет неба синий
-   Убирать GUI когда он не используется

Шаг 1

-   Звёзды приближаются к новой заколдованной вещи
-   Начинается загадка
-   (Можно попробовать проиграть всю загадку)
-   Вещь расколдовывается и припоединяется к облаку всех остальных вещей
-   Звёзды летят к следующей заколдованной вещи
-   Любые цвета из color.adobe.com
-   Попробовать добавить свет
-   Перетаскивание звёзд

Шаг 2

-   Процедурные цвета
-   Сделать соответствие размеров экрана и игровых объектов
-   Научиться реагировать на смену активного окна
-   Переписать GUI на react + css-n-js
-   Понять как распределен размер звёзд на небе

Фабула
Луна зажигает звёзды, наступает ночь

Фичи

-   Есть луна. Лунный свет от неё
-   Шестеренки (небесные сферы :) крутятся и задевают звёзды, они играют
-   В космосе летает космонавт в скафандре и прочиде активные космические штуки
-   Внизу кто-то может приходить и смотреть на всё это дело

### Features

## Запуск игры про летающий цар

Шаг 1

-   Уровни (10)
    -   смена уровня
    -   самая простая индикация смены уровня
-   Небольшая задержка при столкновении с главной звездой
-   Закрывать меню настроек после начала игры
-   Сделать звёздочки разного размера (высота звука соответствует)
-   Лучше давайе собирать маленьких белых умпалумпов типа детенышей

Шаг 2

-   Смена цвета фона и звёзд
-   Размеры по гармонии
-   Сияние цели
-   Сделать игрока в форме самолёта ИЛИ
-   Попробовать сделать из игрока спутник добавив рожки
-   Анимация цветом при столкновении со звездой
-   Сделящая камера должна вести себя так,
    чтобы корабль никогда не долетал до курсора,
    сохраняя направление ИЛИ
-   Управление относительно точки куда нажали мышкой (ставить туда указатель)
-   Больших звёзд должно быть меньше, а маленьких больше
-   Скрывать меню вообще когда нет никакой активности

Фабула
Мы собираем своих маленьких потерянных деток-шариков

Фичи

-   При нажатии на Пробел/Клике игрок хватает ближайший объект
-   Сопроводить попытку хватания звуком
-   Добавление интересного просто на пути следования мяча
-   Индикация смены уровня в виде физических букв внутри игры?
-   Пост-эффекты
-   Клики усиливают шарик? Разгоняют ещё сильнее
-   Звук усиливающегося шарика как в exo one
-   Немного растягивать шарик по направлению движения
-   Деформация мяча при полёте
-   Облака соединённые констрейнтами. Хорошо смотрятся розовые на зеленом фоне
-   Звучи от звёздочек проигрывать не просто так, а по аккордам, чтобы получилось приятно
-   Обрезать слишком длинные звуки (сейчас этого делать не буду)
-   Узнать о коллекции звуков Sony, которые они опубликовали
-   Переключение музыки кнопками
-   Сохранение настроек звука и проч
-   Когда шатл подлетает близко и останавливается, он выкидывает трос и хватает что рядом
-   Добавить на крылья шатла красные фигуры имитируя Буран
-   Автоматически подтягивать камеру так, чтобы она создавала хорошую композицию
-   Звуки стихают в зависимости от расстояния до камеры
-   Переделать систему фона на один экран вложенный в четыре контейнера, которые в общем контейнере

Артефакты

-   Шестерёнки как в старой игре
-   Собака лаит на пролетающий мячик
-   Мячь обладает гравитацией
-   Ночная звёздочка, ничего не видно кроме её цвета
-   Гравитация действует на сам шар
-   Гравитация действует на кубики
-   Нужно коснуться всех кубиков (зажечь их?) и тогда получишь звёздочку
-   Нужно ни коснуться ни одного кубика
-   Указатель на Дом или какое-то одно место если можно перетаскивать предметы
-   Звёзды изначально белые но при столкновении получают свой цвет

## Разбиение на локации. Не рендерить то, что не видно

-   Вынести работу с entities как с индексом в отдельный класс EntitiesIndex
-   Возможно вынести работу с поиском компонентов в класс ComponentsIndex
-   Изменить поиск компонентов. Каждой сущности просто присваивать массив размером 32 (можно сильно сократить через типы до 16 или 8) куда записывать индексы в массивах с компонентами (или сами компоненты)

---

1. Ожидание подключения второго игрока
2. После команды Старт игроки появляются в своей точки респауна
3. После поражения игрок появляется в своей точке респауна
4. Победителю начисляется сквозное очко

---

-   Проверить что сигнал Атака отправляется пока кнопка нажата, пакеты могут теряться
-   Использовать экстраполяцию врага, но ! дорисовывать промежуточные кадры если он слишком быстро перемещается, как в кинематографической съёмке, может быть текущий кадр тоже полупрозрачным
-   Добавить комнаты. Соединять в signal только с одинаковыми комнатами. Передавать через get параметр
-   Добавить в список stun и turn серверов гугловские и прочие на всякий случай
-   Закодировать состояния типа bool через один бит. Так большую часть данных можно передать одним битом. Возможно перейти на передачу данных на int и float передавать в int
-   Растягивать двигающиеся предметы (персонажей) по направлению движения
-   сделать отдельные вызовы send и receive для упрощения всей схемы
-   Возможно стоит перенести js код в libjs чтобы он там собирался (минифицировался хотя бы)
-   Когда оппонент отключается, переподключаться в другой комнате если есть непустые! ??
-   Добавить динамическое создание комнат. Почему бы и нет? Тогда не придётся переживать что комнат не хватит. То слишком много их не будет т.к. люди сначала будут пытаться найти свободную комнату
-   Поискать eslint плагин для отслеживания аллокации памяти джава-скриптом.
-   Обновить все зависимости
-   Добавить тесты на ecs
-   Реал-тайм проверки непрерывного слишком сильного роста сущностей (на случай если мы забываем их удалять)
-   Депенденси инжектион с помощью атрибутов

---

-   При передаче сообщений использовать ArrayBufferView чтобы избежать копирования

-   Перейти на Web Audio API
